/********************************************************************************
 * Copyright (c) 2023 CrossBreeze.
 ********************************************************************************/

:root {
   --sprotty-background: var(--theia-editor-background);
   --sprotty-edge: #6d6d6d;
   --sprotty-edge-selected: var(--theia-focusBorder);
   --sprotty-border: var(--theia-editor-foreground);
}

/* Standard sprotty */
.sprotty {
   height: 100%;
}

.feedback-edge {
   pointer-events: none;
}

.sprotty-graph {
   font-size: 15pt;
   height: 100%;
   background-size: 11px;
   background: var(--sprotty-background);
}

.sprotty
   .edge-creation:not(.edge-check-pending-mode):not(.edge-creation-select-source-mode):not(.edge-creation-select-target-mode):not(
      .edge-reconnect-select-target-mode
   ):not(.edge-modification-not-allowed-mode) {
   cursor: ew-resize;
}

.sprotty
   .mapping-creation:not(.edge-check-pending-mode):not(.edge-creation-select-source-mode):not(.edge-creation-select-target-mode):not(
      .edge-reconnect-select-target-mode
   ):not(.edge-modification-not-allowed-mode) {
   cursor: ew-resize;
}

.sprotty text {
   font-family: monospace;
}

.sprotty-edge {
   stroke: var(--sprotty-edge);
   stroke-width: 2px;
}

.sprotty-edge.selected {
   stroke: var(--sprotty-edge-selected);
}

/* Nodes */
.sprotty-node:not(.selected, .mouseover) {
   fill: #fbfaff;
   stroke: #a8a1c5;
   stroke-width: 2px;
   /* filter: drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.8)); */
}

.source-object .sprotty-node:not(.selected, .mouseover) {
   stroke: #a1c5a5;
   fill: #fefffe;
}

.attribute-port {
   stroke-width: 0;
   fill: var(--sprotty-edge);
}

.mapping-edge {
   stroke: rgba(161, 197, 165, 0.65); /* rgba(161, 197, 165) === #a1c5a5 */
}

.source-object .right-port {
   fill: rgba(161, 197, 165); /* rgba(161, 197, 165) === #a1c5a5 */
}

.target-object .left-port {
   fill: rgba(168, 161, 197); /* rgba(168, 161, 197) === #a8a1c5 */
}

.attribute-compartment.selected .attribute-port,
.entity.selected .attribute-port,
.target-object.selected .attribute-port,
.attribute-compartment.mouseover .attribute-port,
.entity.mouseover:not(.selected) .attribute-port,
.target-object.mouseover:not(.selected) .attribute-port {
   fill: var(--theia-focusBorder);
}

.entity .left-port,
.entity:not(.source-object) .right-port {
   visibility: hidden;
}

.header-label {
   font-weight: bold;
   letter-spacing: 0.5px;
}

.attribute-compartment {
   stroke: none;
   fill: transparent;
}

.attribute-compartment.mouseover,
.sprotty-node.mouseover:not(.selected),
.sprotty-edge.mouseover:not(.selected),
.source-highlight > .sprotty-node {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   opacity: 1;
}

.attribute-compartment.selected,
.sprotty-node.selected,
.sprotty-edge.selected,
.sprotty-edge.connector-selected {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   stroke-dasharray: 6px 3px;
}

.attribute-compartment.mouseover,
.attribute-compartment.selected,
.sprotty-node.mouseover:not(.selected),
.sprotty-node.selected,
.source-highlight > .sprotty-node {
   fill: #f3faff;
   stroke-width: 2px;
}

.sprotty .attribute_expression_marker {
   text-anchor: start;
   fill: #666666;
   baseline-shift: 2px;
}

.sprotty line.identifier {
   stroke: black;
   stroke-width: 0.75px;
   stroke-dasharray: none;
   stroke-linecap: round;
}

.minimize-palette-button {
   color: var(--theia-editor-foreground) !important;
   top: 16px;
   right: 20px;
}

.tool-palette {
   transition: max-height 0.2s ease-in-out;
   overflow: hidden;
}

.tool-palette .group-header {
   display: none;
}

.command-palette {
   animation: none;
}

.attribute.identifier .icon-path {
   transform: scale(0.0105) translate(-400px, 1375px);
   fill: #000;
}

.grid-background .sprotty-graph,
.grid-background.sprotty-graph {
   --background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><g><line x1="10" y1="15" x2="20" y2="15" stroke="black" stroke-width="1" stroke-linecap="round" stroke-opacity="0.15" /><line x1="15" y1="10" x2="15" y2="20" stroke="black" stroke-width="1" stroke-linecap="round" stroke-opacity="0.15" /></g></svg>');
   background-image: var(--background-image);
   background-size: var(--grid-background-width) var(--grid-background-height);
   background-position: var(--grid-background-x) var(--grid-background-y);
}

.sprotty .header-icon {
   display: flex;
}

.sprotty .header-icon i {
   display: none;
}

.sprotty .header-icon i {
   margin-right: 0.2em;
}

.sprotty .palette-header {
   flex-direction: row;
}

.label-edit input {
   text-align: center;
   background-color: transparent;
   outline-color: transparent;
   border: 0;
   letter-spacing: 0.9px;
}

.error-extension {
   position: absolute;
   width: 100%;
}

.diagram-edge.relationship-child-0_1 {
   marker-end: var(--svg-def-marker-relation-child-one);
}
.diagram-edge.relationship-child-0_1.selected,
.diagram-edge.relationship-child-0_1.mouseover {
   marker-end: var(--svg-def-marker-relation-child-one-sel);
}

.diagram-edge.relationship-child-1_1 {
   marker-end: var(--svg-def-marker-relation-child-one-m);
}
.diagram-edge.relationship-child-1_1.selected,
.diagram-edge.relationship-child-1_1.mouseover {
   marker-end: var(--svg-def-marker-relation-child-one-m-sel);
}

.diagram-edge.relationship-child-0_N {
   marker-end: var(--svg-def-marker-relation-child-multi);
}
.diagram-edge.relationship-child-0_N.selected,
.diagram-edge.relationship-child-0_N.mouseover {
   marker-end: var(--svg-def-marker-relation-child-multi-sel);
}

.diagram-edge.relationship-child-1_N {
   marker-end: var(--svg-def-marker-relation-child-multi-m);
}
.diagram-edge.relationship-child-1_N.selected,
.diagram-edge.relationship-child-1_N.mouseover {
   marker-end: var(--svg-def-marker-relation-child-multi-m-sel);
}

.diagram-edge.relationship-parent-0_1 {
   marker-start: var(--svg-def-marker-relation-parent-one);
}
.diagram-edge.relationship-parent-0_1.selected,
.diagram-edge.relationship-parent-0_1.mouseover {
   marker-start: var(--svg-def-marker-relation-parent-one-sel);
}

.diagram-edge.relationship-parent-1_1 {
   marker-start: var(--svg-def-marker-relation-parent-one-m);
}
.diagram-edge.relationship-parent-1_1.selected,
.diagram-edge.relationship-parent-1_1.mouseover {
   marker-start: var(--svg-def-marker-relation-parent-one-m-sel);
}

.diagram-edge.relationship-parent-0_N {
   marker-start: var(--svg-def-marker-relation-parent-multi);
}
.diagram-edge.relationship-parent-0_N.selected,
.diagram-edge.relationship-parent-0_N.mouseover {
   marker-start: var(--svg-def-marker-relation-parent-multi-sel);
}

.diagram-edge.relationship-parent-1_N {
   marker-start: var(--svg-def-marker-relation-parent-multi-m);
}
.diagram-edge.relationship-parent-1_N.selected,
.diagram-edge.relationship-parent-1_N.mouseover {
   marker-start: var(--svg-def-marker-relation-parent-multi-m-sel);
}

.diagram-edge.inheritance {
   marker-end: var(--svg-def-marker-inheritance);
}

.diagram-edge.inheritance.selected,
.diagram-edge.inheritance.mouseover {
   marker-end: var(--svg-def-marker-inheritance-selected);
}

.dialogOverlay.entity-name-dialog {
   background: revert;
}

.dialogOverlay.entity-name-dialog .dialogTitle,
.dialogOverlay.entity-name-dialog .dialogControl {
   display: none;
   visibility: hidden;
}

.dialogOverlay.entity-name-dialog .dialogContent {
   padding: 1px;
}

.sprotty-graph.input-mode {
   background-color: rgba(0, 0, 0, 0.05);
}

.tool-palette .tool-button {
   background: var(--theia-list-inactiveSelectionBackground) !important;
   color: var(--theia-list-inactiveSelectionForeground) !important;
   border: none !important;
   outline: none !important;
}

.tool-palette .tool-button:focus {
   border: none !important;
   outline: none !important;
   box-shadow: none !important;
}

.tool-palette .tool-button.clicked,
.tool-palette .tool-button.clicked:focus,
.tool-palette .tool-button.clicked:active,
.tool-palette .tool-button.clicked:hover {
   background: var(--theia-list-activeSelectionBackground) !important;
   color: var(--theia-list-activeSelectionForeground) !important;
   outline: none !important;
}

.tool-palette .tool-button:hover {
   background: var(--theia-list-hoverBackground) !important;
   color: var(--theia-list-hoverForeground) !important;
   outline: none !important;
}

/* ============================================
 * Swimlane Styles - æ³³é“æ ·å¼
 * éœ€æ±‚ 3.1-3.4: æ³³é“åŠŸèƒ½çš„å›¾å½¢è¡¨ç¤º
 * ============================================ */

/* æ³³é“èŠ‚ç‚¹åŸºç¡€æ ·å¼ */
.swimlane-node {
   cursor: move;
}

.swimlane-node .swimlane-background {
   fill: var(--theia-editor-background);
   fill-opacity: 0.3;
   stroke: none;
}

.swimlane-node .swimlane-border {
   fill: none;
   stroke: var(--theia-panel-border);
   stroke-width: 1px;
}

.swimlane-node.selected .swimlane-border {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   stroke-dasharray: 6px 3px;
}

.swimlane-node.mouseover:not(.selected) .swimlane-border {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
}

/* æ³³é“å¤´éƒ¨æ ·å¼ */
.swimlane-header {
   cursor: pointer;
}

.swimlane-header-background {
   fill: var(--theia-sideBar-background);
   fill-opacity: 0.8;
}

.swimlane-header-separator {
   stroke: var(--theia-panel-border);
   stroke-width: 1px;
}

/* æ³³é“æ ‡ç­¾æ ·å¼ */
.swimlane-label {
   font-family: var(--theia-ui-font-family);
   font-size: 12px;
   font-weight: 600;
   fill: var(--theia-editor-foreground);
   text-anchor: middle;
   dominant-baseline: middle;
}

.swimlane-label.selected {
   fill: var(--theia-focusBorder);
}

/* æ³³é“å†…å®¹åŒºåŸŸæ ·å¼ */
.swimlane-content {
   pointer-events: all;
}

.swimlane-content-background {
   fill: transparent;
}

/* æ³³é“æ‹–æ”¾é«˜äº®æ ·å¼ */
.swimlane-node.drop-target .swimlane-content-background {
   fill: var(--theia-list-dropBackground);
   fill-opacity: 0.3;
}

.swimlane-node.drop-target .swimlane-border {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   stroke-dasharray: 4px 2px;
}

/* æ°´å¹³æ³³é“æ ·å¼ */
.swimlane-node.horizontal .swimlane-header {
   writing-mode: horizontal-tb;
}

/* å‚ç›´æ³³é“æ ·å¼ */
.swimlane-node.vertical .swimlane-header {
   writing-mode: vertical-rl;
   text-orientation: mixed;
}

.swimlane-node.vertical .swimlane-label {
   writing-mode: vertical-rl;
   text-orientation: mixed;
}

/* æ³³é“è°ƒæ•´å¤§å°æ‰‹æŸ„ */
.swimlane-resize-handle {
   fill: var(--theia-focusBorder);
   stroke: none;
   cursor: nwse-resize;
   opacity: 0;
}

.swimlane-node.selected .swimlane-resize-handle,
.swimlane-node.mouseover .swimlane-resize-handle {
   opacity: 1;
}

/* æ³³é“å†…èŠ‚ç‚¹æ ·å¼è°ƒæ•´ */
.swimlane-content .sprotty-node {
   /* æ³³é“å†…çš„èŠ‚ç‚¹ä¿æŒæ­£å¸¸æ ·å¼ */
}

/* æ³³é“æŠ˜å çŠ¶æ€ */
.swimlane-node.collapsed .swimlane-content {
   display: none;
}

.swimlane-node.collapsed .swimlane-border {
   height: 30px;
}

/* ============================================
 * Reference Node Styles - å¼•ç”¨èŠ‚ç‚¹æ ·å¼
 * éœ€æ±‚ 4.1-4.5: å¼•ç”¨èŠ‚ç‚¹çš„å›¾å½¢è¡¨ç¤ºå’Œè§†è§‰æŒ‡ç¤º
 * ============================================ */

/* å¼•ç”¨èŠ‚ç‚¹åŸºç¡€æ ·å¼ */
.reference-node {
   cursor: pointer;
}

.reference-node rect.reference,
.reference-node .node-body.reference {
   stroke: #6366f1;
   stroke-width: 2px;
   stroke-dasharray: 5, 3;
   fill: #f0f0ff;
}

.reference-node.selected rect.reference,
.reference-node.selected .node-body.reference {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   stroke-dasharray: 6px 3px;
}

.reference-node.mouseover:not(.selected) rect.reference,
.reference-node.mouseover:not(.selected) .node-body.reference {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   fill: #e8e8ff;
}

/* å¼•ç”¨æ ‡è®°æ ·å¼ */
.reference-badge {
   pointer-events: none;
}

.reference-badge .badge-background {
   fill: #6366f1;
   stroke: white;
   stroke-width: 1px;
}

.reference-badge .badge-icon {
   fill: white;
   font-size: 10px;
}

/* é“¾æ¥æŒ‡ç¤ºå™¨æ ·å¼ */
.link-indicator {
   pointer-events: none;
}

.link-indicator .link-text {
   fill: #666;
   font-style: italic;
   font-size: 8px;
}

/* å¼•ç”¨èŠ‚ç‚¹æ‚¬åœæ•ˆæœ */
.reference-node:hover {
   filter: brightness(1.05);
}

/* å¼•ç”¨å…³ç³»è¿çº¿æ ·å¼ */
.reference-relationship-edge {
   stroke: #6366f1;
   stroke-width: 1px;
   stroke-dasharray: 3, 2;
   stroke-opacity: 0.5;
}

.reference-relationship-edge.selected,
.reference-relationship-edge.mouseover {
   stroke-opacity: 1;
   stroke-width: 2px;
}

/* å¼•ç”¨èŠ‚ç‚¹å·¥å…·æç¤º */
.reference-node-tooltip {
   background: #6366f1;
   color: white;
   padding: 4px 8px;
   border-radius: 4px;
   font-size: 12px;
   pointer-events: none;
}

/* å¼•ç”¨èŠ‚ç‚¹ä¸Šä¸‹æ–‡èœå•æ ·å¼ */
.context-menu .reference-menu-item {
   color: #6366f1;
}

.context-menu .reference-menu-item::before {
   content: 'ğŸ”— ';
}

/* å¼•ç”¨èŠ‚ç‚¹åœ¨æ³³é“ä¸­çš„æ ·å¼ */
.swimlane-content .reference-node rect.reference {
   stroke: #6366f1;
   stroke-dasharray: 5, 3;
}

/* å¼•ç”¨èŠ‚ç‚¹ç¦ç”¨ç¼–è¾‘æŒ‡ç¤º */
.reference-node .readonly-indicator {
   fill: #9ca3af;
   font-size: 10px;
}

/* å¼•ç”¨èŠ‚ç‚¹æºèŠ‚ç‚¹é«˜äº® */
.source-node-highlight {
   stroke: #6366f1 !important;
   stroke-width: 3px !important;
   stroke-dasharray: none !important;
   filter: drop-shadow(0 0 4px rgba(99, 102, 241, 0.5));
}

/* ============================================
 * Concurrent Process Styles - å¹¶å‘æµç¨‹æ ·å¼
 * éœ€æ±‚ 6.1-6.4: å¹¶å‘æµç¨‹çš„å›¾å½¢è¡¨ç¤º
 * ============================================ */

/* å¹¶å‘å¼€å§‹èŠ‚ç‚¹æ ·å¼ */
.concurrent-start-node {
   cursor: pointer;
}

.concurrent-start-node .concurrent-start-background {
   fill: var(--theia-editor-background);
   stroke: var(--theia-charts-green, #4ade80);
   stroke-width: 1.5px;
}

.concurrent-start-node.selected .concurrent-start-background {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   stroke-dasharray: 6px 3px;
}

.concurrent-start-node.mouseover:not(.selected) .concurrent-start-background {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
}

.concurrent-start-node .concurrent-start-symbol {
   fill: none;
   stroke: var(--theia-charts-green, #4ade80);
   stroke-width: 2px;
   stroke-linecap: round;
}

/* å¹¶å‘ç»“æŸèŠ‚ç‚¹æ ·å¼ */
.concurrent-end-node {
   cursor: pointer;
}

.concurrent-end-node .concurrent-end-background {
   fill: var(--theia-editor-background);
   stroke: var(--theia-charts-orange, #fb923c);
   stroke-width: 1.5px;
}

.concurrent-end-node.selected .concurrent-end-background {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   stroke-dasharray: 6px 3px;
}

.concurrent-end-node.mouseover:not(.selected) .concurrent-end-background {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
}

.concurrent-end-node .concurrent-end-symbol {
   fill: none;
   stroke: var(--theia-charts-orange, #fb923c);
   stroke-width: 2px;
   stroke-linecap: round;
}

/* å¹¶å‘å®¹å™¨æ ·å¼ */
.concurrent-container {
   pointer-events: all;
}

.concurrent-container-background {
   fill: var(--theia-editor-background);
   fill-opacity: 0.3;
   stroke: var(--theia-panel-border);
   stroke-width: 1px;
   stroke-dasharray: 5, 5;
}

.concurrent-container.selected .concurrent-container-background {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
}

.concurrent-container.mouseover:not(.selected) .concurrent-container-background {
   stroke: var(--theia-focusBorder);
   stroke-width: 1.5px;
}

/* å¹¶å‘åˆ†æ”¯è¾¹æ ·å¼ */
.concurrent-branch-edge {
   fill: none;
   stroke: var(--theia-charts-blue, #60a5fa);
   stroke-width: 1.5px;
   stroke-dasharray: 4, 2;
}

.concurrent-branch-edge.selected {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   stroke-dasharray: 6px 3px;
}

.concurrent-branch-edge.mouseover:not(.selected) {
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
}

.concurrent-branch-arrow {
   fill: none;
   stroke: var(--theia-charts-blue, #60a5fa);
   stroke-width: 1.5px;
}

/* å¹¶å‘æ ‡ç­¾æ ·å¼ */
.concurrent-label {
   font-family: var(--theia-ui-font-family);
   font-size: 12px;
   fill: var(--theia-editor-foreground);
   text-anchor: middle;
   dominant-baseline: middle;
}

.concurrent-label.selected {
   fill: var(--theia-focusBorder);
}

/* å¹¶å‘æµç¨‹éªŒè¯é”™è¯¯æ ·å¼ */
.concurrent-validation-error {
   stroke: var(--theia-errorForeground, #f87171) !important;
   stroke-width: 2px !important;
}

.concurrent-validation-error .concurrent-start-background,
.concurrent-validation-error .concurrent-end-background {
   stroke: var(--theia-errorForeground, #f87171) !important;
}

/* å¹¶å‘æµç¨‹ç¯è·¯è­¦å‘Šæ ·å¼ */
.concurrent-cycle-warning {
   stroke: var(--theia-warningForeground, #fbbf24) !important;
   stroke-width: 2px !important;
   animation: cycle-warning-pulse 1s ease-in-out infinite;
}

@keyframes cycle-warning-pulse {
   0%,
   100% {
      stroke-opacity: 1;
   }
   50% {
      stroke-opacity: 0.5;
   }
}

/* å¹¶å‘æµç¨‹æ‹–æ”¾é«˜äº®æ ·å¼ */
.concurrent-container.drop-target .concurrent-container-background {
   fill: var(--theia-list-dropBackground);
   fill-opacity: 0.3;
   stroke: var(--theia-focusBorder);
   stroke-width: 2px;
   stroke-dasharray: 4px 2px;
}

/* å¹¶å‘æµç¨‹å†…èŠ‚ç‚¹æ ·å¼ */
.concurrent-container .sprotty-node {
   /* å¹¶å‘æµç¨‹å†…çš„èŠ‚ç‚¹ä¿æŒæ­£å¸¸æ ·å¼ */
}

/* å¹¶å‘æµç¨‹å·¥å…·æç¤º */
.concurrent-tooltip {
   background: var(--theia-charts-blue, #60a5fa);
   color: white;
   padding: 4px 8px;
   border-radius: 4px;
   font-size: 12px;
   pointer-events: none;
}

/* å¹¶å‘æµç¨‹åˆ†æ”¯æŒ‡ç¤ºå™¨ */
.concurrent-branch-indicator {
   fill: var(--theia-charts-blue, #60a5fa);
   font-size: 10px;
   font-weight: bold;
}

/* å¹¶å‘æµç¨‹è¿æ¥ç‚¹æ ·å¼ */
.concurrent-connection-point {
   fill: var(--theia-charts-blue, #60a5fa);
   stroke: white;
   stroke-width: 1px;
   cursor: crosshair;
}

.concurrent-connection-point:hover {
   fill: var(--theia-focusBorder);
   transform: scale(1.2);
}

/* å¹¶å‘æµç¨‹ç¦ç”¨çŠ¶æ€ */
.concurrent-disabled {
   opacity: 0.5;
   pointer-events: none;
}

.concurrent-disabled .concurrent-start-background,
.concurrent-disabled .concurrent-end-background,
.concurrent-disabled .concurrent-container-background {
   stroke: var(--theia-disabledForeground, #9ca3af) !important;
}
