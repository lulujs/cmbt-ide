workflow:
    id: test_workflow
    name: "测试工作流程"
    metadata:
        version: "1.0.0"
        author: "CrossModel Team"
        tags:
            - "测试"
            - "图形编辑器"
            - "完整功能"
    
    nodes:
        - begin:
            id: start_process
            name: "开始流程"
            description: "测试流程的入口点"
            position:
                x: 100
                y: 300
        - process:
            id: validate_data
            name: "验证数据"
            description: "验证输入数据的有效性"
            position:
                x: 300
                y: 300
        - decision:
            id: validation_check
            name: "验证检查"
            description: "检查数据验证结果"
            position:
                x: 500
                y: 300
            branches:
                - id: valid_branch
                  value: "valid"
                - id: invalid_branch
                  value: "invalid"
                  isDefault: true
        - concurrent:
            id: parallel_processing
            name: "并行处理开始"
            description: "开始并行处理任务"
            position:
                x: 700
                y: 200
        - process:
            id: process_task_1
            name: "任务1"
            description: "并行处理任务1"
            position:
                x: 900
                y: 150
        - process:
            id: process_task_2
            name: "任务2"
            description: "并行处理任务2"
            position:
                x: 900
                y: 250
        - concurrent:
            id: parallel_join
            name: "并行处理结束"
            description: "等待所有并行任务完成"
            position:
                x: 1100
                y: 200
        - auto:
            id: generate_report
            name: "生成报告"
            description: "自动生成处理报告"
            position:
                x: 1300
                y: 200
            automationActions:
                - id: create_report_action
                  name: "创建报告"
                  actionType: script
                  configuration:
                      - key: "script"
                        value: "create_report.py"
                      - key: "format"
                        value: "json"
        - end:
            id: success_end
            name: "成功完成"
            description: "流程成功完成"
            expectedValue: "success"
            position:
                x: 1500
                y: 200
        - process:
            id: handle_error
            name: "错误处理"
            description: "处理验证失败的情况"
            position:
                x: 700
                y: 400
        - exception:
            id: error_end
            name: "处理失败"
            description: "流程因错误而终止"
            expectedValue: "error"
            position:
                x: 900
                y: 400
    
    edges:
        - edge:
            id: edge_start_validate
            source: start_process
            target: validate_data
        - edge:
            id: edge_validate_check
            source: validate_data
            target: validation_check
        - edge:
            id: edge_valid_parallel
            source: validation_check
            target: parallel_processing
            value: "valid"
        - edge:
            id: edge_parallel_task1
            source: parallel_processing
            target: process_task_1
        - edge:
            id: edge_parallel_task2
            source: parallel_processing
            target: process_task_2
        - edge:
            id: edge_task1_join
            source: process_task_1
            target: parallel_join
        - edge:
            id: edge_task2_join
            source: process_task_2
            target: parallel_join
        - edge:
            id: edge_join_report
            source: parallel_join
            target: generate_report
        - edge:
            id: edge_report_success
            source: generate_report
            target: success_end
        - edge:
            id: edge_invalid_error
            source: validation_check
            target: handle_error
            value: "invalid"
        - edge:
            id: edge_error_end
            source: handle_error
            target: error_end